module.exports=function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t){e.exports=require("@abramstyle/utils")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CALL_API=Symbol("CALL_API")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidTypes=function(e){return Array.isArray(e)&&3===e.length&&e.every(e=>s.stringUtils.isString(e))},t.isValidCallAPI=function(e){return s.objectUtils.isObject(e)&&e.url};var s=r(0)},function(e,t){e.exports=require("mime-types")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(3);t.resultFilter=async function(e){const{data:t,error:r}=e;if(r)throw r;return t},t.responseParser=async function(e){const t=Object.assign({},e),{response:r}=e;if(!r)return e;const{headers:n}=r,i=n.get("content-type"),o=s.extension(i)||"text";let a=null;if("json"===o)a=await r.json();else if("text"===o){const e=await r.text();try{a=JSON.parse(e)}catch(t){a=e}}else a=r||{};return Object.assign(t,{data:a}),t},t.resultTransformer=async function(e){const{response:t}=e;if(!t)return e;const{ok:r}=t,s=Object.assign({},e);if(!r){const r=new Error(t.statusText);r.response=t,r.status=t.status,r.data=e.data,Object.assign(s,{error:r})}return s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.secureMethods=new Set(["GET","OPTIONS"])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyMiddlewares=t.serializeUrl=t.serializeOptions=t.actionWith=void 0;var s=r(0),n=r(5);t.actionWith=async function(e){if(!s.objectUtils.isObject(e))throw new TypeError("expect descriptor to be an object");return e.meta=e.meta,e.payload=e.payload,e},t.serializeOptions=function(e={}){const t={credentials:"same-origin",method:"GET",headers:{},body:null},{credentials:r,headers:n,data:i,method:o,query:a}=e;return s.stringUtils.isString(r)&&(t.credentials=r),s.objectUtils.isObject(n)&&Object.assign(t.headers,n),i&&(t.body=i),(s.objectUtils.isObject(t.body)||Array.isArray(t.body)||s.stringUtils.isString(t.body))&&(Object.assign(t,{headers:Object.assign(t.headers,{accept:"application/json","Content-Type":"application/json"})}),t.body=JSON.stringify(t.body)),t.method=s.stringUtils.isString(o)?o.toUpperCase():"GET",s.objectUtils.isObject(a)&&(t.query=a),t},t.serializeUrl=function(e,t){let r=e;const{query:i,body:o,method:a}=t;return s.objectUtils.isObject(i)&&(r=s.urlUtils.mergeQuerystring(r,i)),n.secureMethods.has(a)&&(r=s.urlUtils.mergeQuerystring(r,o)),r},t.applyMiddlewares=async function(e,t){const r=[...e];return async function e(t){const s=r.shift(),n=await t;return"function"==typeof s?e(s.call(null,n)):(r.length,n)}(Promise.resolve(t))}},function(e,t){e.exports=require("isomorphic-fetch")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=r(7),i=(s=n)&&s.__esModule?s:{default:s},o=r(0),a=r(6),c=r(1),l=r(4),u=r(2);t.default=function(e={}){const{before:t}=e;return e=>r=>async s=>{const n=s[c.CALL_API];if(!(0,u.isValidCallAPI)(n))return r(s);const{types:d,url:f}=n;if(!(0,u.isValidTypes)(d))throw new TypeError("expect types as an array.");let p=()=>{},y=()=>{};const[b,j,O]=d,h=[l.responseParser,l.resultTransformer,...n.middlewares||[]];if(n.isSuccess&&"function"==typeof n.isSuccess&&({isSuccess:p}=n),n.success&&"function"==typeof n.success&&({success:y}=n),r(await(0,a.actionWith)({type:b,payload:n.data||{},meta:n.meta||{}})),n.cached)return r(await(0,a.actionWith)({type:j,payload:n.cached||{},meta:n.meta||{}}));const m=(0,a.serializeOptions)(n),g=(0,a.serializeUrl)(f,m),_={fetchOptions:m,url:g,response:null,error:null,data:null};if("function"==typeof t){const t=n.before.call(null,m,e);o.objectUtils.isObject(t)&&Object.assign(m,t)}if("function"==typeof n.before){const t=n.before.call(null,m,e);o.objectUtils.isObject(t)&&Object.assign(m,t)}try{const e=await(0,i.default)(g,m);Object.assign(_,{response:e})}catch(e){Object.assign(_,{error:e})}const w=await(0,a.applyMiddlewares)(h,_);try{const e=await(0,l.resultFilter)(w),t=p(e);return t?r(await(0,a.actionWith)({type:O,payload:t,meta:n.meta||{},error:!0})):(y.call(null,w),r(await(0,a.actionWith)({type:j,payload:e,meta:n.meta||{}})))}catch(e){return r(await(0,a.actionWith)({type:O,payload:e,meta:n.meta||{},error:!0}))}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CALL_API=t.default=void 0;var s,n=r(8),i=(s=n)&&s.__esModule?s:{default:s},o=r(1);t.default=i.default,t.CALL_API=o.CALL_API}]);
//# sourceMappingURL=redux-api.js.map