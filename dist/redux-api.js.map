{"version":3,"file":"redux-api.js","sources":["webpack://redux-api/redux-api.js"],"sourcesContent":["module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=9)}([function(e,t){e.exports=require(\"@abramstyle/utils\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.CALL_API=Symbol(\"CALL_API\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.isValidTypes=function(e){return Array.isArray(e)&&3===e.length&&e.every(function(e){return n.stringUtils.isString(e)})},t.isValidCallAPI=function(e){return n.objectUtils.isObject(e)&&e.url};var n=r(0)},function(e,t){e.exports=require(\"mime-types\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,a,s,i=(n=c(regeneratorRuntime.mark(function e(t){var r,n,a,s,i,u,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object.assign({},t),n=t.response){e.next=4;break}return e.abrupt(\"return\",t);case 4:if(a=n.headers,s=a.get(\"content-type\"),i=l.extension(s)||\"text\",u=null,\"json\"!==i){e.next=14;break}return e.next=11,n.json();case 11:u=e.sent,e.next=22;break;case 14:if(\"text\"!==i){e.next=21;break}return e.next=17,n.text();case 17:o=e.sent;try{u=JSON.parse(o)}catch(e){u=o}e.next=22;break;case 21:u=n||{};case 22:return Object.assign(r,{data:u}),e.abrupt(\"return\",r);case 24:case\"end\":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}),u=(a=c(regeneratorRuntime.mark(function e(t){var r,n,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.response){e.next=3;break}return e.abrupt(\"return\",t);case 3:return n=r.ok,a=Object.assign({},t),n||((s=new Error(r.statusText)).response=r,s.status=r.status,s.data=t.data,Object.assign(a,{error:s})),e.abrupt(\"return\",a);case 7:case\"end\":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)}),o=(s=c(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data,!(n=t.error)){e.next=3;break}throw n;case 3:return e.abrupt(\"return\",r);case 4:case\"end\":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)});function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,s){try{var i=t[a](s),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n(\"next\",e)},function(e){n(\"throw\",e)});e(u)}(\"next\")})}}var l=r(3);t.resultFilter=o,t.responseParser=i,t.resultTransformer=u},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.secureMethods=new Set([\"GET\",\"OPTIONS\"])},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.applyMiddlewares=t.serializeUrl=t.serializeOptions=t.actionWith=void 0;var n,a,s=(n=l(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.objectUtils.isObject(t)){e.next=2;break}throw new TypeError(\"expect descriptor to be an object\");case 2:return t.meta=t.meta,t.payload=t.payload,e.abrupt(\"return\",t);case 5:case\"end\":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}),i=(a=l(regeneratorRuntime.mark(function e(t,r){var n,a,s=(n=l(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.shift(),e.next=3,t;case 3:if(n=e.sent,\"function\"!=typeof r){e.next=6;break}return e.abrupt(\"return\",s(r.call(null,n)));case 6:if(0!==a.length){e.next=8;break}return e.abrupt(\"return\",n);case 8:return e.abrupt(\"return\",n);case 9:case\"end\":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)});return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[].concat(c(t)),e.abrupt(\"return\",s(Promise.resolve(r)));case 2:case\"end\":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)}),u=r(0),o=r(5);function c(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,s){try{var i=t[a](s),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n(\"next\",e)},function(e){n(\"throw\",e)});e(u)}(\"next\")})}}t.actionWith=s,t.serializeOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={credentials:\"same-origin\",method:\"GET\",headers:{},body:null},r=e.credentials,n=e.headers,a=e.data,s=e.method,i=e.query;return u.stringUtils.isString(r)&&(t.credentials=r),u.objectUtils.isObject(n)&&Object.assign(t.headers,n),a&&(t.body=a),(u.objectUtils.isObject(t.body)||Array.isArray(t.body)||u.stringUtils.isString(t.body))&&(Object.assign(t,{headers:Object.assign(t.headers,{accept:\"application/json\",\"Content-Type\":\"application/json\"})}),t.body=JSON.stringify(t.body)),t.method=u.stringUtils.isString(s)?s.toUpperCase():\"GET\",u.objectUtils.isObject(i)&&(t.query=i),t},t.serializeUrl=function(e,t){var r=e,n=t.query,a=t.body,s=t.method;return u.objectUtils.isObject(n)&&(r=u.urlUtils.mergeQuerystring(r,n)),o.secureMethods.has(s)&&(r=u.urlUtils.mergeQuerystring(r,a)),r},t.applyMiddlewares=i},function(e,t){e.exports=require(\"isomorphic-fetch\")},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw s}}return r}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),s=r(7),i=(n=s)&&n.__esModule?n:{default:n},u=r(0),o=r(6),c=r(1),l=r(4),f=r(2);function p(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}t.default=function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).before;return function(r){return function(n){return s=regeneratorRuntime.mark(function s(d){var y,b,h,v,m,x,g,j,O,w,A,P,_,k,U,M,R,S,T;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(y=d[c.CALL_API],(0,f.isValidCallAPI)(y)){e.next=3;break}return e.abrupt(\"return\",n(d));case 3:if(b=y.types,h=y.url,(0,f.isValidTypes)(b)){e.next=6;break}throw new TypeError(\"expect types as an array.\");case 6:return v=function(){},m=function(){},x=a(b,3),g=x[0],j=x[1],O=x[2],w=[l.responseParser,l.resultTransformer].concat(p(y.middlewares||[])),y.isSuccess&&\"function\"==typeof y.isSuccess&&(v=y.isSuccess),y.success&&\"function\"==typeof y.success&&(m=y.success),e.t0=n,e.next=15,(0,o.actionWith)({type:g,payload:y.data||{},meta:y.meta||{}});case 15:if(e.t1=e.sent,(0,e.t0)(e.t1),!y.cached){e.next=23;break}return e.t2=n,e.next=21,(0,o.actionWith)({type:j,payload:y.cached||{},meta:y.meta||{}});case 21:return e.t3=e.sent,e.abrupt(\"return\",(0,e.t2)(e.t3));case 23:return A=(0,o.serializeOptions)(y),P=(0,o.serializeUrl)(h,A),_={fetchOptions:A,url:P,response:null,error:null,data:null},\"function\"==typeof t&&(k=y.before.call(null,A,r),u.objectUtils.isObject(k)&&Object.assign(A,k)),\"function\"==typeof y.before&&(U=y.before.call(null,A,r),u.objectUtils.isObject(U)&&Object.assign(A,U)),e.prev=28,e.next=31,(0,i.default)(P,A);case 31:M=e.sent,Object.assign(_,{response:M}),e.next=38;break;case 35:e.prev=35,e.t4=e.catch(28),Object.assign(_,{error:e.t4});case 38:return e.next=40,(0,o.applyMiddlewares)(w,_);case 40:return R=e.sent,e.prev=41,e.next=44,(0,l.resultFilter)(R);case 44:if(S=e.sent,T=v(S)){e.next=53;break}return m.call(null,R),e.t5=n,e.next=51,(0,o.actionWith)({type:j,payload:S,meta:y.meta||{}});case 51:return e.t6=e.sent,e.abrupt(\"return\",(0,e.t5)(e.t6));case 53:return e.t7=n,e.next=56,(0,o.actionWith)({type:O,payload:T,meta:y.meta||{},error:!0});case 56:return e.t8=e.sent,e.abrupt(\"return\",(0,e.t7)(e.t8));case 60:return e.prev=60,e.t9=e.catch(41),e.t10=n,e.next=65,(0,o.actionWith)({type:O,payload:e.t9,meta:y.meta||{},error:!0});case 65:return e.t11=e.sent,e.abrupt(\"return\",(0,e.t10)(e.t11));case 67:case\"end\":return e.stop()}},s,e,[[28,35],[41,60]])}),d=function(){var e=s.apply(this,arguments);return new Promise(function(t,r){return function n(a,s){try{var i=e[a](s),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n(\"next\",e)},function(e){n(\"throw\",e)});t(u)}(\"next\")})},function(e){return d.apply(this,arguments)};var s,d}}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.CALL_API=t.default=void 0;var n,a=r(8),s=(n=a)&&n.__esModule?n:{default:n},i=r(1);t.default=s.default,t.CALL_API=i.CALL_API}]);"],"mappings":"AAAA","sourceRoot":""}